@{
    ViewBag.Title = "Search";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    string keyword = ViewData["keyword"].ToString();
    var listUser = ViewData["listUser"] as List<FlyAwayPlus.Models.User>;
    var listPlace = ViewData["listPlace"] as List<FlyAwayPlus.Models.Place>;

}
<link href="~/Content/HomePage/carousel.css" rel="stylesheet" />
<link href="~/Content/HomePage/gridLayout.css" rel="stylesheet" />
<link href="~/Content/SearchPage/search.css" rel="stylesheet" />

<div class="container">
    <div class="full-width">
        <h3><span class="label label-primary">Search Result for "@keyword"</span></h3>
    </div>

    <div role="tabpanel" class="full-width">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active"><a id="idBtnSearchPlace" href="#idSearchPlace" aria-controls="idSearchPlace" role="tab" data-toggle="tab">Place (@listPlace.Count)</a></li>
            <li role="presentation"><a id="idBtnSearchPeople" href="#idSearchPeople" aria-controls="idSearchPeople" role="tab" data-toggle="tab">People (@listUser.Count)</a></li>
            <li role="presentation"><a id="idBtnSearchRoom" href="#idSearchRoom" aria-controls="idSearchRoom" role="tab" data-toggle="tab">Room (100)</a></li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
            <div role="tabpanel" class="tab-pane active full-width" id="idSearchPlace">
                <div class="full-width search-result" style="margin-top: 10px;">
                    <section id="idSearchPlaceResult">
                        <article class="white-panel">
                            <img src="http://www.mediademon.com/wp-content/uploads/2013/07/Blog-Post-Imagery5.png" alt="ALT">
                            <h1><a href="SearchDetail">Putting users first with flat design</a></h1>
                            <div class="divider"></div>
                        </article>

                    </section>
                </div>
            </div>
            <div role="tabpanel" class="tab-pane full-width" id="idSearchPeople">
                @foreach (var user in listUser)
                {
                    <div class="full-width">
                        <li data-index="@user.userID">
                            <div class="Module User followFriendsItem small">
                                <div class="content">
                                    <a href="/User/Index/2/">
                                        <span class="thumbImageWrapper">
                                            <div class="Image Module">
                                                <div class="heightContainer">
                                                    <img data-src="@user.avatar" alt="@string.Format("{0} {1}", user.firstName, user.lastName)" style="" src="@user.avatar">
                                                </div>
                                            </div>
                                        </span>
                                    </a>
                                    <div class="contactUser">
                                        <a class="contactUsername" href="/User/Index/@user.userID/">@string.Format("{0} {1}", user.firstName, user.lastName)</a>
                                        <br />
                                        <p style="margin:0px;">mutuals friends</p>

                                        <button role="@user.userID" type="button" class="Button FollowButton Module UserFollowButton borderless hasText notNavigatable">
                                            <span class="buttonText">Waitting for accept</span>
                                        </button>
                                    </div>
                                    <i class="dismiss"></i>
                                </div>
                            </div>
                        </li>
                    </div>
                }
            </div>
            <div role="tabpanel" class="tab-pane full-width" id="idSearchRoom">
                <div class="full-width search-room search-result" style="margin-top: 10px;" id="idSearchRoomResult">
                    <div>
                        <img class="img-responsive img-thumbnail full-width" src="~/Images/avatar/avatar-1.jpg" />
                        <h1><a class="center-block">Room 001</a></h1>
                    </div>
                    <div>
                        <img class="img-responsive img-thumbnail full-width" src="~/Images/avatar/avatar-2.jpg" />
                        <h1><a class="center-block">Room 002</a></h1>
                    </div>
                    <div>
                        <img class="img-responsive img-thumbnail full-width" src="~/Images/avatar/avatar-3.jpg" />
                        <h1><a class="center-block">Room 003</a></h1>
                    </div>
                    <div>
                        <img class="img-responsive img-thumbnail full-width" src="~/Images/avatar/avatar-4.jpg" />
                        <h1><a class="center-block">Room 004</a></h1>
                    </div>
                    <div>
                        <img class="img-responsive img-thumbnail full-width" src="~/Images/avatar/avatar-5.jpg" />
                        <h1><a class="center-block">Room 005</a></h1>
                    </div>
                    <div>
                        <img class="img-responsive img-thumbnail full-width" src="~/Images/avatar/avatar-6.jpg" />
                        <h1><a class="center-block">Room 006</a></h1>
                    </div>
                    <div>
                        <img class="img-responsive img-thumbnail full-width" src="~/Images/avatar/avatar-1.jpg" />
                        <h1><a class="center-block">Room 001</a></h1>
                    </div>
                    <div>
                        <img class="img-responsive img-thumbnail full-width" src="~/Images/avatar/avatar-2.jpg" />
                        <h1><a class="center-block">Room 002</a></h1>
                    </div>
                    <div>
                        <img class="img-responsive img-thumbnail full-width" src="~/Images/avatar/avatar-3.jpg" />
                        <h1><a class="center-block">Room 003</a></h1>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="~/Scripts/carousel/masonry.pkgd.min.js"></script>
<script src="~/Scripts/carousel/jquery.flexslider-min.js"></script>
<script src="~/Scripts/carousel/main.js"></script>

<script src="~/Scripts/HomePage/pinterest_grid.js"></script>
<script>
    $(document).ready(function () {
        $('#idSearchPlaceResult').pinterest_grid({
            no_columns: 4,
            padding_x: 20,
            padding_y: 20,
            margin_bottom: 50,
            single_column_breakpoint: 700
        });

        $('.blog-landing').pinterest_grid({
            no_columns: 4,
            padding_x: 20,
            padding_y: 20,
            margin_bottom: 50,
            single_column_breakpoint: 700
        });

        /*
        $("#idBtnSearchRoom").one("click", function () {
            alert("x");
            $("#idSearchRoomResult").css("width", $("#idSearchPeopleResult").css("width"));
            $("#idSearchRoomResult").css("height", $("#idSearchPeopleResult").css("height"));
            $("#idSearchRoomResult").pinterest_grid({
                no_columns: 4,
                padding_x: 20,
                padding_y: 20,
                margin_bottom: 50,
                single_column_breakpoint: 700
            });
            //$("#idSearchRoomResult").find("img").css("max-width", "240px");
            //$("#idSearchRoomResult").find(".white-panel").css("width", "260px");
        });
        */

        $("#idSearchPeople").find("img.img-circle")
            .mouseenter(function () {
                var parent = $(this).parent();
                var height = Number($(parent).height());
                var width = Number($(parent).width());

                $(parent).find("div").first().css("margin-top", -height / 2 + "px");
                $(parent).find("div").first().css("margin-left", width / 2 + "px");
                $(parent).find("div").first().show();
            })
            .mouseleave(function () {
                $(this).parent().find("div").first().hide();
            })
    });
</script>